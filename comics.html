<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GunkyZone â€” Comics</title>
  <link href="https://fonts.googleapis.com/css2?family=VT323&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg: #020202; --border: #1a1a1a; --text: #d4c0c0;
      --accent: #9b0000; --font-disp: 'VT323', monospace;
    }
    body { background: var(--bg); color: var(--text); font-family: var(--font-disp); padding: 20px; }
    .site-wrapper { max-width: 900px; margin: 0 auto; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; margin-top: 40px; }
    .comic-card { border: 1px solid var(--border); background: #050505; cursor: pointer; transition: 0.2s; }
    .comic-card:hover { border-color: var(--accent); transform: translateY(-3px); }
    .thumb { width: 100%; aspect-ratio: 3/4; background: #111; object-fit: cover; border-bottom: 1px solid var(--border); }
    .info { padding: 10px; text-align: center; text-transform: uppercase; letter-spacing: 1px; }
    
    /* MODAL */
    #comic-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 9999; }
    #modal-content { position: relative; width: 95%; height: 95%; margin: 2% auto; border: 1px solid var(--accent); }
    iframe { width: 100%; height: 100%; border: none; }
    .close-modal { position: absolute; top: -35px; right: 0; color: var(--accent); cursor: pointer; font-size: 24px; }
  </style>
</head>
<body>
<div class="site-wrapper">
  <h1 style="color: var(--accent); font-size: 40px;">> COMIC_ARCHIVE</h1>
  <a href="index.html" style="color: #5a3a3a; text-decoration: none;">[ BACK_TO_ROOT ]</a>
  
  <div id="comic-grid" class="grid"></div>
</div>

<div id="comic-modal">
  <div id="modal-content">
    <span class="close-modal" onclick="closeComic()">[ CLOSE_X ]</span>
    <iframe id="comic-iframe" src=""></iframe>
  </div>
</div>

<script>
  function loadComics() {
    fetch('media.json').then(r => r.json()).then(data => {
      const grid = document.getElementById('comic-grid');
      data.comics.forEach(comic => {
        grid.innerHTML += `
          <div class="comic-card" onclick="openComic('${comic.url}')">
            <img class="thumb" src="${comic.thumbnail || ''}" alt="THUMB">
            <div class="info">${comic.title}</div>
          </div>`;
      });
    });
  }

  function openComic(url) {
    const modal = document.getElementById('comic-modal');
    const iframe = document.getElementById('comic-iframe');
    // We send the file to your custom viewer
    iframe.src = `pdf-viewer.html?file=${encodeURIComponent(url)}`;
    modal.style.display = 'block';
  }

  function closeComic() {
    document.getElementById('comic-modal').style.display = 'none';
    document.getElementById('comic-iframe').src = '';
  }

  window.onload = loadComics;
</script>
</body>
</html>
